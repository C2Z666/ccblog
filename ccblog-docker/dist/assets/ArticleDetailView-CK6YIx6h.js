import{d as G,u as te,r as L,w as ie,c as A,a as e,b as l,e as p,t as $,f as q,g as U,h as v,F as Q,i as ce,j as he,k as j,l as B,A as ze,m as se,n as P,o as I,p as O,v as Y,q as ne,s as He,x as Ke,y as F,z as Oe,B as Ye,C as Ee,D as de,E as ue,G as je,_ as oe,H as xe,I as fe,U as Fe,J as Xe,K as qe,L as Ze,M as Je,N as re,O as me,P as Qe,Q as Ge,R as We,S as et,T as tt,V as ot,W as J,X as at,Y as lt,Z as we,$ as ve,a0 as z,a1 as Ne,a2 as $e,a3 as st,a4 as nt,a5 as it,a6 as ct,a7 as rt,a8 as dt,a9 as ut}from"./index-DZh2AJ8r.js";import{M as mt}from"./index-C9wDZUq0.js";/* empty css              */import{M as ht}from"./MdCatalog-btRZhvOq.js";const ft={author:{followCount:0,fansCount:0,joinDayCount:0,articleCount:0,likeCount:0,readCount:0,collectCount:0,followed:!1,infoPercent:0,yearArticleList:[]},other:{readType:0},article:{articleId:"",articleType:0,author:"",authorName:"",authorAvatar:"",title:"",shortTitle:"",summary:"",cover:"",content:"",sourceType:"",sourceUrl:"",status:0,officalStat:0,toppingStat:0,creamStat:0,createTime:"",lastUpdateTime:"",category:{categoryId:0,category:"",rank:0,status:0},tags:[],liked:!1,commented:!1,collected:!1,count:{likeCnt:0,readCnt:0,collectCnt:0,commentCnt:0},praisedUsers:[],categoryId:0,version:0},hotComment:{commentCount:0,commentContent:"",commentId:"",commentTime:"",likeCount:0,praised:!1,userId:"",userName:"",userPhoto:"",childComments:[]},comments:[],columnId:0,sectionId:0,commentParents:[],topCommentInfo:null};var ee=(a=>(a[a.EMPTY=0]="EMPTY",a[a.READ=1]="READ",a[a.PRAISE=2]="PRAISE",a[a.COLLECTION=3]="COLLECTION",a[a.CANCEL_PRAISE=4]="CANCEL_PRAISE",a[a.CANCEL_COLLECTION=5]="CANCEL_COLLECTION",a[a.COMMENT=6]="COMMENT",a[a.DELETE_COMMENT=7]="DELETE_COMMENT",a))(ee||{});const Le=["info","danger","success","warning","primary"],vt=()=>Le[Math.floor(Math.random()*Le.length)],X=a=>(de("data-v-67872608"),a=a(),ue(),a),_t={class:"article-suspended-panel hidden-when-screen-small"},pt={class:"mb-4"},gt={t:"1719494245215",class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"2214",id:"mx_n_1719494245217",width:"16",height:"18"},Ct=["fill"],It={class:"mb-4 p-0"},bt={class:"mb-4"},yt={class:"article-info-wrap com-2-panel col-2-article J-articlePanel"},kt=X(()=>e("span",{class:"com-2-mark-triangle article-mark"},[e("span",{class:"mark-cnt"},"ÂéüÂàõ")],-1)),Lt={id:"postsTitle",class:"article-info-title"},At={key:0,class:"detail-content-title-other-wrap relative flex justify-between"},Et={id:"article-basic-info",class:"flex justify-between",style:{color:"#999999"}},wt={class:"flex"},Nt={class:"center-content mr-2"},$t={class:"center-content mr-2"},Mt={class:"detail-content-title-other-time p-1"},Tt={class:"p-1"},Rt={key:0,class:"p-1",style:{"padding-left":"1em",color:"red"}},Dt={key:1,class:"flex"},St={class:"center-content"},Vt=X(()=>e("span",null,"ÁºñËæë",-1)),Ut={class:"center-content"},Pt=X(()=>e("span",null,"Âà†Èô§",-1)),Bt={class:"flex"},zt={key:0,class:"article-change direction"},Ht=["href"],Kt=X(()=>e("div",{class:"article-change-item"},[e("svg",{t:"1670064682276",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9458",width:"32",height:"32"},[e("path",{d:"M671.968176 911.99957c-12.287381 0-24.576482-4.67206-33.951566-14.047144L286.048434 545.984249c-18.751888-18.719204-18.751888-49.12028 0-67.872168L638.016611 126.111222c18.751888-18.751888 49.12028-18.751888 67.872168 0 18.751888 18.719204 18.751888 49.12028 0 67.872168l-318.016611 318.047574L705.888778 830.047574c18.751888 18.751888 18.751888 49.12028 0 67.872168C696.544658 907.32751 684.255557 911.99957 671.968176 911.99957z","p-id":"9459",fill:"#ffffff"})])],-1)),Ot=[Kt],Yt=["href"],jt=X(()=>e("div",{class:"article-change-item"},[e("svg",{t:"1670064662589",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8352",width:"32",height:"32"},[e("path",{d:"M761.055557 532.128047c0.512619-0.992555 1.343475-1.823411 1.792447-2.848649 8.800538-18.304636 5.919204-40.703346-9.664077-55.424808L399.935923 139.743798c-19.264507-18.208305-49.631179-17.344765-67.872168 1.888778-18.208305 19.264507-17.375729 49.631179 1.888778 67.872168l316.960409 299.839269L335.199677 813.631716c-19.071845 18.399247-19.648112 48.767639-1.247144 67.872168 9.407768 9.791372 21.984142 14.688778 34.560516 14.688778 12.000108 0 24.000215-4.479398 33.311652-13.439914l350.048434-337.375729c0.672598-0.672598 0.927187-1.599785 1.599785-2.303346 0.512619-0.479935 1.056202-0.832576 1.567101-1.343475C757.759656 538.879828 759.199462 535.391265 761.055557 532.128047z","p-id":"8353",fill:"#ffffff"})])],-1)),xt=[jt],Ft={key:1},Xt=X(()=>e("div",{class:"needlock"},[e("a",{class:"btn-readmore no-login underline","data-target":"#loginModal","data-toggle":"modal"},[e("span",null,"ÁôªÂΩï‰πãÂêéÂç≥ÂèØÈòÖËØªÂÖ®Êñá")])],-1)),qt=[Xt],Zt={key:2},Jt={class:"needlock"},Qt={class:"btn-readmore no-login underline",href:"#",target:"_blank","data-target":"#registerModal","data-toggle":"modal"},Gt={class:"modal fade",id:"deleteModal","data-backdrop":"static","data-keyboard":"false",tabindex:"-1",role:"dialog","aria-labelledby":"deleteModalDropLabel","aria-hidden":"true"},Wt={class:"modal-dialog"},eo={class:"modal-content"},to=X(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"deleteModalDropLabel"},"Âà†Èô§ÊèêÈÜí"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"√ó")])],-1)),oo={class:"modal-body"},ao=X(()=>e("div",{class:"modal-footer"},[e("button",{id:"deleteBtn",type:"button",class:"btn btn-primary"}," Á°ÆÂÆö "),e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," ÂèñÊ∂à ")],-1)),lo={class:"article-heart bg-color-white"},so={t:"1719494245215",class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"2214",id:"mx_n_1719494245217",width:"16",height:"18"},no=["fill"],io={class:"praise-photos"},co={class:"approval-tips-line",id:"praiseDesc","data-defult-text":"ÁúüËØöÁÇπËµû ËØö‰∏çÊàëÊ¨∫"},ro={class:"approval-box",id:"praiseUsers"},uo=["href"],mo=["src"],ho={class:"dialog-footer"},fo=G({__name:"ArticleDetail",props:{articleVo:{},categoryId:{}},emits:["update-count","update-status","update-article-info"],setup(a,{emit:H}){var M,ae,le,_e,pe,ge,Ce,Ie,be,ye,ke;const d=te().global,h=he(),E=j("loginDialogClicked"),s=a,r=H,V=L(!1),g=()=>{B(je,{articleId:s.articleVo.article.articleId}).then(o=>{h.push("/")}).catch(o=>{console.error(o)})},_=L(!1),T=L(((ae=(M=s.articleVo.article)==null?void 0:M.count)==null?void 0:ae.readCnt)||0),y=L(((_e=(le=s.articleVo.article)==null?void 0:le.count)==null?void 0:_e.likeCnt)||0),b=L(((ge=(pe=s.articleVo.article)==null?void 0:pe.count)==null?void 0:ge.commentCnt)||0),w=L(((Ie=(Ce=s.articleVo.article)==null?void 0:Ce.count)==null?void 0:Ie.collectCnt)||0),D=L(((be=s.articleVo.article)==null?void 0:be.liked)||!1),S=L(((ye=s.articleVo.article)==null?void 0:ye.commented)||!1),f=L(((ke=s.articleVo.article)==null?void 0:ke.collected)||!1),t=L(s.articleVo.article.praisedUsers?s.articleVo.article.praisedUsers:[]);(()=>{const o=s.articleVo.article.articleId,R=!s.articleVo.article.tags||s.articleVo.article.tags.length===0;B(ze+`/${o}`,{queryFix:R,categoryId:s.categoryId,authorId:s.articleVo.article.author}).then(N=>{if(N.data.result&&N.data.result.article){const i=N.data.result.article;i.liked!==void 0&&(D.value=i.liked),i.commented!==void 0&&(S.value=i.commented),i.collected!==void 0&&(f.value=i.collected),i.count&&(i.count.likeCnt!==void 0&&(y.value=i.count.likeCnt,r("update-count","like",y.value)),i.count.commentCnt!==void 0&&(b.value=i.count.commentCnt,r("update-count","comment",b.value)),i.count.collectCnt!==void 0&&(w.value=i.count.collectCnt,r("update-count","collect",w.value)),i.count.readCnt!==void 0&&s.articleVo.article.count&&(T.value=i.count.readCnt,r("update-count","read",T.value))),R&&i.tags&&i.tags.length>0?(i.tags&&(r("update-article-info","tags",i.tags),console.log("Êõ¥Êñ∞tagsÊï∞ÊçÆ:",i.tags)),i.category&&r("update-article-info","category",i.category),i.authorName&&r("update-article-info","authorName",i.authorName),i.authorAvatar&&r("update-article-info","authorAvatar",i.authorAvatar)):(i.category&&r("update-article-info","category",i.category),i.authorName&&r("update-article-info","authorName",i.authorName),i.authorAvatar&&r("update-article-info","authorAvatar",i.authorAvatar)),i.praisedUsers&&(t.value=i.praisedUsers)}}).catch(N=>{console.error("Ëé∑ÂèñÊõ¥Â§öÊñáÁ´†‰ø°ÊÅØÂ§±Ë¥•:",N)})})(),ie(()=>s.articleVo.article,o=>{var R,N,i;console.log(o),y.value=((R=o==null?void 0:o.count)==null?void 0:R.likeCnt)||0,b.value=((N=o==null?void 0:o.count)==null?void 0:N.commentCnt)||0,w.value=((i=o==null?void 0:o.count)==null?void 0:i.collectCnt)||0,D.value=(o==null?void 0:o.liked)||!1,S.value=(o==null?void 0:o.commented)||!1,f.value=(o==null?void 0:o.collected)||!1,t.value=(o==null?void 0:o.praisedUsers)||[]});const m=(o,R)=>{const N=o.split(".");let i=s.articleVo.article;for(let x=0;x<N.length-1;x++){const W=N[x];i[W]||(i[W]={}),i=i[W]}i[N[N.length-1]]=R},c=()=>{if(!d.isLogin){E?E():console.error("showLoginDialog is not defined");return}_.value=!0,D.value?B(se,{articleId:s.articleVo.article.articleId,type:ee.CANCEL_PRAISE,authorId:s.articleVo.article.author}).then(o=>{var R;y.value--,D.value=!1,t.value=(R=t.value)==null?void 0:R.filter(N=>N.userId!==d.user.id),m("liked",!1),s.articleVo.article.count&&m("count.likeCnt",y.value)}).catch(o=>{console.error(o)}).finally(()=>{_.value=!1}):B(se,{articleId:s.articleVo.article.articleId,type:ee.PRAISE,authorId:s.articleVo.article.author}).then(o=>{y.value++,D.value=!0,m("liked",!0),s.articleVo.article.count&&m("count.likeCnt",y.value)}).catch(o=>{console.error(o)}).finally(()=>{_.value=!1})},C=()=>{const o=document.querySelector(".comment-item")||document.querySelector(".single-comment")||document.querySelector(".comment:first-child"),R=document.getElementById("praiseDesc");o?o.scrollIntoView({behavior:"smooth"}):R?R.scrollIntoView({behavior:"smooth"}):window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},k=()=>{if(!d.isLogin){E?E():console.error("showLoginDialog is not defined");return}_.value=!0,f.value?B(se,{articleId:s.articleVo.article.articleId,type:ee.CANCEL_COLLECTION,authorId:s.articleVo.article.author}).then(o=>{w.value--,f.value=!1,m("collected",!1),s.articleVo.article.count&&m("count.collectCnt",w.value)}).catch(o=>{console.error(o)}).finally(()=>{_.value=!1}):B(se,{articleId:s.articleVo.article.articleId,authorId:s.articleVo.article.author,type:ee.COLLECTION}).then(o=>{w.value++,f.value=!0,m("collected",!0),s.articleVo.article.count&&m("count.collectCnt",w.value)}).catch(o=>{console.error(o)}).finally(()=>{_.value=!1})};return(o,R)=>{const N=P("el-icon"),i=P("el-button"),x=P("el-badge"),W=P("el-avatar"),Se=P("el-link"),Ve=P("el-tag"),Ue=P("H2"),Pe=P("el-dialog");return I(),A(Q,null,[e("div",_t,[e("div",pt,[l(x,{offset:[-5,5],type:D.value?"danger":"primary",value:y.value,class:"item",hidden:y.value===0},{default:p(()=>[l(i,{circle:"",round:"",size:"large",onClick:c},{default:p(()=>[O(l(N,{size:"20"},{default:p(()=>[(I(),A("svg",gt,[e("path",{d:"M621.674667 408.021333c16.618667-74.24 28.224-127.936 34.837333-161.194666C673.152 163.093333 629.941333 85.333333 544.298667 85.333333c-77.226667 0-116.010667 38.378667-138.88 115.093334l-0.586667 2.24c-13.728 62.058667-34.72 110.165333-62.506667 144.586666a158.261333 158.261333 0 0 1-119.733333 58.965334l-21.909333 0.469333C148.437333 407.808 106.666667 450.816 106.666667 503.498667V821.333333c0 64.8 52.106667 117.333333 116.394666 117.333334h412.522667c84.736 0 160.373333-53.568 189.12-133.92l85.696-239.584c21.802667-60.96-9.536-128.202667-70.005333-150.186667a115.552 115.552 0 0 0-39.488-6.954667H621.674667z",fill:D.value?"#ED722E":"#8a8a8a","p-id":"2215"},null,8,Ct)]))]),_:1},512),[[Y,!_.value]]),O(l(N,{class:"is-loading",size:"20"},{default:p(()=>[l(v(ne))]),_:1},512),[[Y,_.value]])]),_:1})]),_:1},8,["type","value","hidden"])]),e("div",It,[l(x,{offset:[-5,5],type:S.value?"danger":"primary",value:b.value,hidden:b.value===0,class:"item"},{default:p(()=>[l(i,{circle:"",round:"",size:"large",onClick:C},{default:p(()=>[O(l(N,{size:"20",color:S.value?"#ED722E":"#8a8a8a"},{default:p(()=>[l(v(He))]),_:1},8,["color"]),[[Y,!_.value]]),O(l(N,{class:"is-loading",size:"20"},{default:p(()=>[l(v(ne))]),_:1},512),[[Y,_.value]])]),_:1})]),_:1},8,["type","value","hidden"])]),e("div",bt,[l(x,{offset:[-5,5],type:f.value?"danger":"primary",value:w.value,class:"item",hidden:w.value===0},{default:p(()=>[l(i,{circle:"",round:"",size:"large",onClick:k},{default:p(()=>[O(l(N,{size:"20",color:f.value?"#ED722E":"#8a8a8a"},{default:p(()=>[l(v(Ke))]),_:1},8,["color"]),[[Y,!_.value]]),O(l(N,{class:"is-loading",size:"20"},{default:p(()=>[l(v(ne))]),_:1},512),[[Y,_.value]])]),_:1})]),_:1},8,["type","value","hidden"])])]),e("section",yt,[kt,e("div",Lt,$(o.articleVo.article.title),1),e("div",null,[o.articleVo.article&&Object.keys(o.articleVo.article).length!==0?(I(),A("div",At,[e("div",Et,[e("div",wt,[e("p",Nt,[l(W,{src:o.articleVo.article.authorAvatar,size:"small"},null,8,["src"])]),e("p",$t,[o.articleVo.article.author?(I(),q(Se,{key:0,href:"/user/"+o.articleVo.article.author,class:"detail-content-title-other-name",type:"primary"},{default:p(()=>[F($(o.articleVo.article.authorName),1)]),_:1},8,["href"])):U("",!0)]),e("span",Mt,$(v(Oe)(o.articleVo.article.createTime,"yyyyÂπ¥MMÊúàddÊó•")),1),e("span",Tt,$("ÈòÖËØª "+T.value),1)]),o.articleVo.article.status!==1?(I(),A("span",Rt,$(o.articleVo.article.status==0?"(ËçâÁ®ø)":"(ÂÆ°Ê†∏‰∏≠)"),1)):U("",!0),v(d).isLogin&&o.articleVo.article.author==v(d).user.id?(I(),A("div",Dt,[e("p",{onClick:R[0]||(R[0]=()=>{v(h).push("/article/edit/"+o.articleVo.article.articleId)}),class:"p-1 edit-delete-btn flex"},[e("span",St,[l(N,{size:20},{default:p(()=>[l(v(Ye))]),_:1})]),Vt]),e("p",{onClick:R[1]||(R[1]=K=>V.value=!0),class:"p-1 edit-delete-btn flex"},[e("span",Ut,[l(N,{size:20},{default:p(()=>[l(v(Ee))]),_:1})]),Pt])])):U("",!0)]),e("div",null,[(I(!0),A(Q,null,ce(o.articleVo.article.tags,K=>(I(),q(Ve,{class:"m-1",type:v(vt)(),key:K.tagId},{default:p(()=>[F($(K.tag),1)]),_:2},1032,["type"]))),128))])])):U("",!0)]),e("div",Bt,[l(v(mt),{"editor-id":"id","model-value":o.articleVo.article.content,math:!0,toolbars:!1,"copy-code":!1,"preview-class":"article-content-preview",theme:"light"},null,8,["model-value"])]),o.articleVo.other&&o.articleVo.other.flip?(I(),A("div",zt,[o.articleVo.other.flip.prevShow?(I(),A("a",{key:0,class:"step-btn--prev",href:o.articleVo.other.flip.prevHref},Ot,8,Ht)):U("",!0),o.articleVo.other.flip.nextShow?(I(),A("a",{key:1,class:"step-btn--next",href:o.articleVo.other.flip.nextHref},xt,8,Yt)):U("",!0)])):U("",!0),o.articleVo.other&&o.articleVo.other.readType===1&&!v(d).isLogin?(I(),A("div",Ft,qt)):U("",!0),o.articleVo.other&&o.articleVo.other.readType===3&&!(v(d).user!=null&&v(d).user.starStatus=="FORMAL")?(I(),A("div",Zt,[e("div",Jt,[e("a",Qt,[l(Ue,null,{default:p(()=>[F("Â∑≤Âä†ÂÖ•‰∫åÂì•ÁºñÁ®ãÊòüÁêÉÔºåÂç≥ÂàªÁªëÂÆöÊòüÁêÉÁºñÂè∑Ëß£ÈîÅüîê")]),_:1})])])])):U("",!0),e("div",Gt,[e("div",Wt,[e("div",eo,[to,e("div",oo,[e("p",null,$("Á°ÆÂÆöÂà†Èô§„Ää"+o.articleVo.article.title+"„ÄãÂêó"),1)]),ao])])]),e("div",lo,[l(i,{circle:"",round:"",size:"large",onClick:c},{default:p(()=>[O(l(N,{size:"20"},{default:p(()=>[(I(),A("svg",so,[e("path",{d:"M621.674667 408.021333c16.618667-74.24 28.224-127.936 34.837333-161.194666C673.152 163.093333 629.941333 85.333333 544.298667 85.333333c-77.226667 0-116.010667 38.378667-138.88 115.093334l-0.586667 2.24c-13.728 62.058667-34.72 110.165333-62.506667 144.586666a158.261333 158.261333 0 0 1-119.733333 58.965334l-21.909333 0.469333C148.437333 407.808 106.666667 450.816 106.666667 503.498667V821.333333c0 64.8 52.106667 117.333333 116.394666 117.333334h412.522667c84.736 0 160.373333-53.568 189.12-133.92l85.696-239.584c21.802667-60.96-9.536-128.202667-70.005333-150.186667a115.552 115.552 0 0 0-39.488-6.954667H621.674667z",fill:D.value?"#ED722E":"#8a8a8a","p-id":"2215"},null,8,no)]))]),_:1},512),[[Y,!_.value]]),O(l(N,{class:"is-loading",size:"20"},{default:p(()=>[l(v(ne))]),_:1},512),[[Y,_.value]])]),_:1}),e("div",io,[e("p",co,$(y.value>0?y.value+"‰∫∫Â∑≤ÁÇπËµû":"ÁúüËØöÁÇπËµû ËØö‰∏çÊàëÊ¨∫"),1),e("div",ro,[(I(!0),A(Q,null,ce(t.value,(K,Be)=>(I(),A("a",{class:"g-user-popover approval-img",href:"/user/"+K.userId,key:Be},[e("img",{src:K.avatar},null,8,mo)],8,uo))),128))])])])]),v(d).user&&v(d).user.id==o.articleVo.article.author?(I(),q(Pe,{key:0,modelValue:V.value,"onUpdate:modelValue":R[3]||(R[3]=K=>V.value=K),title:"Âà†Èô§ÊèêÈÜí",width:"500",center:""},{footer:p(()=>[e("div",ho,[l(i,{type:"danger",onClick:g},{default:p(()=>[F(" Á°ÆËÆ§ ")]),_:1}),l(i,{onClick:R[2]||(R[2]=K=>V.value=!1)},{default:p(()=>[F("ÂèñÊ∂à")]),_:1})])]),default:p(()=>[e("div",null,[e("strong",null,"Á°ÆÂÆöÂà†Èô§ „Ää"+$(o.articleVo.article.title)+"„Äã ÂêóÔºü",1)])]),_:1},8,["modelValue"])):U("",!0)],64)}}}),vo=oe(fo,[["__scopeId","data-v-67872608"]]),_o={class:"com-2-panel side J-authorPanel internal"},po=e("header",{class:"com-2-panel-hd"},[e("h3",{class:"com-2-panel-title"},"‰ΩúËÄÖ‰ªãÁªç")],-1),go={class:"com-2-panel-bd"},Co={class:"com-author-intro"},Io={class:"com-author-intro-object"},bo=["href"],yo={class:"com-author-intro-name"},ko=["href","title"],Lo={class:"com-author-intro-desc"},Ao=e("div",{class:"c-bubble-trigger com-verification"},[e("i",{class:"verified"})],-1),Eo={class:"com-author-intro-btns"},wo={class:"com-author-intro-infos"},No={class:"com-author-intro-info"},$o=["href"],Mo=e("div",{class:"com-author-intro-info-title"},"ÊñáÁ´†Êï∞",-1),To={class:"com-author-intro-info-num"},Ro={class:"com-author-intro-info"},Do=["href"],So=e("div",{class:"com-author-intro-info-title"},"ÁÇπËµûÊï∞",-1),Vo={class:"com-author-intro-info-num"},Uo={class:"com-author-intro-info"},Po=["href"],Bo=e("div",{class:"com-author-intro-info-title"},"Êî∂ËóèÊï∞",-1),zo={class:"com-author-intro-info-num"},Ho={class:"com-author-intro-info"},Ko=["href"],Oo=e("div",{class:"com-author-intro-info-title"},"Á≤â‰∏ùÊï∞",-1),Yo={class:"com-author-intro-info-num"},jo=G({__name:"UserCard",props:{user:{},global:{}},setup(a){const n=te().global;he();const d=a,h=L(!1),E=L(!1);ie([()=>d.user.userId,qe()],([r,V])=>{if(!n.isLogin){E.value=!1;return}E.value=V.has(Number(r))},{immediate:!0});const s=()=>{h.value=!0,fe(Fe,{followId:d.user.userId,followed:!E.value}).then(r=>{E.value=!E.value;const V=Number(d.user.userId);Xe(V,E.value)}).catch(r=>{console.log(r)}).finally(()=>{h.value=!1})};return(r,V)=>{const g=P("el-button");return I(),A("section",_o,[po,e("div",go,[e("div",Co,[e("div",Io,[e("a",{href:"/user/"+r.user.userId,class:"com-author-intro-avatar",style:xe({backgroundImage:"url("+r.user.photo+")"})},null,12,bo)]),e("h3",yo,[e("a",{href:"/user/"+r.user.userId,class:"com-author-intro-name-inner",title:r.user.userName},$(r.user.userName),9,ko)]),e("div",Lo,[e("span",null,$("Â∑≤Âä†ÂÖ•"+r.user.joinDayCount+"Â§©"),1),Ao]),e("div",Eo,[v(n).isLogin&&v(n).user.userId!=r.user.userId?(I(),q(g,{key:0,onClick:s,disabled:h.value,class:"w-20"},{default:p(()=>[F($(E.value==!0?"ÂèñÊ∂àÂÖ≥Ê≥®":"ÂÖ≥Ê≥®"),1)]),_:1},8,["disabled"])):U("",!0)]),e("ul",wo,[e("li",No,[e("a",{href:"/user/"+r.user.userId,class:"com-author-intro-info-link"},[Mo,e("div",To,$(r.user.articleCount),1)],8,$o)]),e("li",Ro,[e("a",{href:"/user/"+r.user.userId,class:"com-author-intro-info-link"},[So,e("div",Vo,$(r.user.likeCount),1)],8,Do)]),e("li",Uo,[e("a",{href:"/user/"+r.user.userId,class:"com-author-intro-info-link"},[Bo,e("div",zo,$(r.user.collectCount),1)],8,Po)]),e("li",Ho,[e("a",{href:"/user/"+r.user.userId,class:"com-author-intro-info-link"},[Oo,e("div",Yo,$(r.user.fansCount),1)],8,Ko)])])])])])}}});var Me={exports:{}};(function(a,H){(function(n,d){a.exports=d()})(Ze,function(){return function(n,d,h){n=n||{};var E=d.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function r(g,_,T,y){return E.fromToBase(g,_,T,y)}h.en.relativeTime=s,E.fromToBase=function(g,_,T,y,b){for(var w,D,S,f=T.$locale().relativeTime||s,t=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],u=t.length,m=0;m<u;m+=1){var c=t[m];c.d&&(w=y?h(g).diff(T,c.d,!0):T.diff(g,c.d,!0));var C=(n.rounding||Math.round)(Math.abs(w));if(S=w>0,C<=c.r||!c.r){C<=1&&m>0&&(c=t[m-1]);var k=f[c.l];b&&(C=b(""+C)),D=typeof k=="string"?k.replace("%d",C):k(C,_,c.l,S);break}}if(_)return D;var M=S?f.future:f.past;return typeof M=="function"?M(D):M.replace("%s",D)},E.to=function(g,_){return r(g,_,this,!0)},E.from=function(g,_){return r(g,_,this)};var V=function(g){return g.$u?h.utc():h()};E.toNow=function(g){return this.to(V(this),g)},E.fromNow=function(g){return this.from(V(this),g)}}})})(Me);var xo=Me.exports;const Fo=Je(xo);var Z=(a=>(a[a.EMPTY=0]="EMPTY",a[a.LIKE=2]="LIKE",a[a.DISLIKE=3]="DISLIKE",a[a.CANCEL_LIKE=4]="CANCEL_LIKE",a[a.CANCEL_DISLIKE=5]="CANCEL_DISLIKE",a[a.REPORT=6]="REPORT",a[a.DELETE=7]="DELETE",a))(Z||{});const Te=a=>(de("data-v-5119d89d"),a=a(),ue(),a),Xo=["id"],qo=["src"],Zo={class:"content-wrap"},Jo={class:"header"},Qo={class:"nick"},Go={class:"time"},Wo=Te(()=>e("span",{class:"count"},"Âà†Èô§",-1)),ea={class:"action-bar"},ta=Te(()=>e("img",{class:"read-comment-praise",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJ9SURBVHgB7VZNbtNQEP7GP7AkN8DcoJyA5gRNTwCR2kqsUm9YEKEaoZRl0hUSBLWcAHOCpjdIT1AfIewgTjzM+AccxwHXLRYS/STnvbyxZ743b34e8L+DcEMMhu+fERk7DLTAuAwRjjz3eVD1+xsROD75eARmr7AczDlsVyVhoCbeDt85mXHmqLtkbst0Ko9jk31aVU9tAgvYW7FxYNJ3D85eufuTOZtKYiZu3X4z/LBdRU9tAia4E0+YL7I1z+3OmPEpkWOrip7aBED0RAcb7K8KeBb/alD+LQIa+TI48kxfuAfTVSlVMlybgAafpN1RYgujopwIOzpGEhuogGuloTc8bd2j5TmS8/VfHu7t5uUaeCaRygORPaqi00JFJAVn2UuNa667xXfEeJZ+rePR+Kool7gIQg67+RpBJTvo5QMoZHPXxFLW8Tld2lhoUqMOfg/JlKjdT2Pnpwf0bDlx3worG1EnPlENF0m5OayO5+7NyjRLHXgMfCsNQhumrBviRfRAhnqyu0KAYXmpcX/BfKKekL+dvBIheOUddkuNK7QO6A43ycXDvolYr5OtGTnlD3VU41rVZLdfccvIipMYDdYINAHZZJyicgR+4wQ0hbVH6Px7RBeNE9BM0lGbVxorTRNImhcxf8mvNxcDafOywBM0TUCqqEa/I09QbF6NECDQdjKuN6hGCJSlX2MENqXfGgFKS6hlmA9wi7hvLJ/qWEy/DL96AfMlEXWkU/mD0XiCkjud7kRk56iOltwRYz3ShM7KXlhpx4PheBR3qxzS6zbSi0YtyOZe9919D38ioNC2vIDl6NyQC2bWtzWVomvf93gWwg7KXH+HfwY/AGsn+Lf3Dim6AAAAAElFTkSuQmCC"},null,-1)),oa={class:"count"},aa={class:"count"},la={class:"count"},sa={key:1,class:"reply-box"},na={class:"reply-action"},ia="https://cdn.tobebetterjavaer.com/paicoding/avatar/0092.png",ca=G({__name:"CursorCommentItem",props:{item:{}},setup(a){const n=te().global,d=j("loginDialogClicked");re.extend(Fo);const h=j("authorId"),E=j("parentId"),s=j("topId"),r=j("resetAndReload"),V=j("articleId"),g=t=>re(t).fromNow();async function _(t){if(!n.isLogin){d==null||d();return}if(await tt.confirm("Âà†Èô§Âêé‰∏çÂèØÊÅ¢Â§çÔºåÁ°ÆÂÆöÁªßÁª≠Ôºü","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}),`${t.commentId}`,!t._btnLoading){t._btnLoading=!0;try{await B(ot,{commentId:t.commentId,type:Z.DELETE}),J("Âà†Èô§ÊàêÂäü","success"),t.commentContent="ËØ•ËØÑËÆ∫Â∑≤Ë¢´Âà†Èô§"}catch{J("Âà†Èô§Â§±Ë¥•","error")}finally{t._btnLoading=!1}}}async function T(t){if(!n.isLogin){d==null||d();return}if(`${t.commentId}`,t._btnLoading)return;t._btnLoading=!0;const u=t.like;try{await B(at,{commentId:t.commentId,type:u?Z.CANCEL_LIKE:Z.LIKE}),t.like=!u,t.likeCnt+=u?-1:1}finally{t._btnLoading=!1}}async function y(t){if(!n.isLogin){d==null||d();return}if(`${t.commentId}`,t._btnLoading)return;t._btnLoading=!0;const u=t.dislike;try{await B(lt,{commentId:t.commentId,type:u?Z.CANCEL_DISLIKE:Z.DISLIKE}),t.dislike=!u,t.dislikeCnt+=u?-1:1}finally{t._btnLoading=!1}}const b=L(""),w=L(!1),D=()=>{if(!n.isLogin){d==null||d();return}w.value=!w.value},S=L(!1);async function f(){if(!n.isLogin){d==null||d();return}S.value=!0;try{const t=await fe(we,{articleId:Number(V),commentContent:b.value,parentCommentId:Number(E),topCommentId:Number(s),authorId:Number(h)});J("ÂõûÂ§çÊàêÂäü","success"),b.value="",w.value=!1,r(t.data.result)}catch{J("ÂõûÂ§çÂ§±Ë¥•","error")}finally{S.value=!1}}return(t,u)=>{const m=P("el-icon"),c=P("el-button"),C=P("el-input");return I(),A("div",{class:me(["comment-card",{folded:t.item.dislike}]),id:`comment-${t.item.commentId}`},[e("img",{class:"avatar",src:t.item.userPhoto||ia},null,8,qo),e("div",Zo,[e("div",Jo,[e("span",Qo,$(t.item.userName),1),e("span",Go,$(g(t.item.commentTime)),1)]),O(e("div",{class:"body"},$(t.item.commentContent),513),[[Y,!t.item.dislike]]),v(n).isLogin&&v(n).user.userId===t.item.userId?(I(),q(c,{key:0,text:"",size:"small",onClick:u[0]||(u[0]=k=>_(t.item))},{default:p(()=>[l(m,{color:"#999"},{default:p(()=>[l(v(Ee))]),_:1}),Wo]),_:1})):U("",!0),e("div",ea,[l(c,{text:"",size:"small",class:me({active:t.item.like}),loading:t.item._btnLoading,onClick:u[1]||(u[1]=k=>T(t.item))},{default:p(()=>[ta,e("span",oa,$(t.item.likeCnt||"ÁÇπËµû"),1)]),_:1},8,["class","loading"]),l(c,{text:"",size:"small",class:me({active:t.item.dislike}),onClick:u[2]||(u[2]=k=>y(t.item))},{default:p(()=>[l(m,{color:"#9333ea"},{default:p(()=>[l(v(Qe))]),_:1}),e("span",aa,$(t.item.dislike?"Â∑≤ÊäòÂè†":"ÁÇπË∏©"),1)]),_:1},8,["class"]),l(c,{text:"",size:"small",onClick:D},{default:p(()=>[l(m,{color:"#0969da"},{default:p(()=>[l(v(Ge))]),_:1}),e("span",la,$(!w.value&&!t.item.dislike?t.item.userName?`ÂõûÂ§ç(${t.item.userName})`:"ÂõûÂ§ç":"ÂèñÊ∂àÂõûÂ§ç"),1)]),_:1})]),w.value?(I(),A("div",sa,[l(C,{modelValue:b.value,"onUpdate:modelValue":u[3]||(u[3]=k=>b.value=k),rows:2,resize:"none",type:"textarea",placeholder:"ÂõûÂ§ç @"+t.item.userName},null,8,["modelValue","placeholder"]),e("div",na,[l(c,{size:"small",type:"primary",disabled:!b.value.trim()||S.value,onClick:f},{default:p(()=>[F(" ËØÑËÆ∫"),l(m,{class:"el-icon--right"},{default:p(()=>[l(v(We))]),_:1})]),_:1},8,["disabled"])])])):U("",!0),t.item.dislike?U("",!0):et(t.$slots,"children",{key:2},void 0,!0)])],10,Xo)}}}),ra=oe(ca,[["__scopeId","data-v-5119d89d"]]),da={class:"comment-item-wrap"},ua={key:0,class:"sub-wrap"},ma={key:0,class:"expand-container"},Ae="5",ha=G({__name:"RecursiveCommentItem",props:{authorId:{},item:{},commentParents:{},targetIndex:{},ifOk:{type:Boolean}},emits:["deleteComment"],setup(a,{emit:H}){const d=ve().params.articleId,h=a;z("articleId",d),z("parentId",h.item.commentId),z("topId",h.item.topCommentId),z("authorId",h.authorId);function E(m){g.value.unshift(m);const c=g.value[g.value.length-1];T.value=c.commentTime,y.value=Number(c.commentId),_.value=g.value.length>=Number(Ae),h.item.replyCnt=0,f.value||(f.value=!0)}z("resetAndReload",E);const s=j("emitOk");z("emitOk",s);function r(m){const c=g.value.findIndex(C=>C.commentId===m.commentId);if(c!==-1){g.value.splice(c,1),_.value=g.value.length>=Number(Ae),g.value.length===0&&(f.value=!1,h.item.replyCnt=0);return}V("deleteComment",m)}z("removeAndReload",r);const V=H,g=L([]),_=L(!0),T=L(),y=L(),b=L(!1);async function w(){b.value||(b.value=!0,await S())}function D(){S()}async function S(){const m={articleId:d,parentId:Number(h.item.commentId),limit:5};T.value&&(m.cursor=re(T.value).format("YYYY-MM-DDTHH:mm:ss"),m.cursorId=y.value);try{const C=(await B($e,m)).data.result;if(g.value.push(...C.comments),_.value=C.hasMore,C.comments.length){const k=C.comments[C.comments.length-1];T.value=k.commentTime,y.value=Number(k.commentId)}}catch(c){console.error("Ëé∑ÂèñËØÑËÆ∫Êï∞ÊçÆÂ§±Ë¥•:",c),_.value=!1}}const f=L(!1);function t(){f.value=!f.value,f.value&&w()}async function u(m=-1){if(!h.commentParents||m>0&&h.commentParents[m-1]!==h.item.commentId)return!1;try{const c=h.commentParents[m];await w();let C=g.value.some(M=>(console.log("child.commentId:",M.commentId,"targetCommentId:",c),Number(M.commentId)===Number(c))),k=0;for(f.value=!0;!C&&_.value&&k<20&&(k++,await S(),C=g.value.some(M=>(console.log("child.commentId:",M.commentId,"targetCommentId:",c),Number(M.commentId)===Number(c))),!C););if(c===h.commentParents[h.commentParents.length-1])return s(),setTimeout(()=>{const M=document.getElementById(`comment-${c}`);M&&(M.scrollIntoView({behavior:"smooth",block:"center"}),M.classList.add("bg-yellow-200","border-2","border-blue-300"),setTimeout(()=>{M.classList.remove("bg-yellow-200","border-2","border-blue-300")},2e3))},300),!0}catch(c){return console.error("Êü•ÊâæËØÑËÆ∫ÈìæÊó∂Âá∫Èîô:",c),!1}}return Ne(async()=>{h.targetIndex===void 0||h.commentParents&&h.commentParents.length==1||h.commentParents&&h.targetIndex>=h.commentParents.length||h.ifOk||await u(h.targetIndex)}),z("toggle",t),(m,c)=>{const C=P("RecursiveCommentItem",!0);return I(),A("div",da,[l(ra,{item:m.item},{children:p(()=>[f.value?(I(),A("div",ua,[(I(!0),A(Q,null,ce(g.value,k=>(I(),q(C,{key:k.commentId,item:k,"comment-parents":h.commentParents,"target-index":h.targetIndex!==void 0?h.targetIndex+1:void 0,"if-ok":h.ifOk,authorId:h.authorId},null,8,["item","comment-parents","target-index","if-ok","authorId"]))),128)),_.value?(I(),A("div",ma,[e("div",{class:"expand",onClick:c[0]||(c[0]=k=>D())},"Â±ïÂºÄÊõ¥Â§ö")])):U("",!0)])):U("",!0),m.item.replyCnt>0?(I(),A("div",{key:1,class:"toggle",onClick:t},$(f.value?"Êî∂Ëµ∑ÂõûÂ§ç":"Â±ïÂºÄÂõûÂ§ç"),1)):U("",!0)]),_:1},8,["item"])])}}}),fa=oe(ha,[["__scopeId","data-v-bf937243"]]),Re=a=>(de("data-v-8b9a1d64"),a=a(),ue(),a),va={class:"comment-list"},_a={xmlns:"http://www.w3.org/2000/svg",style:{display:"none"},class:""},pa=Re(()=>e("symbol",{id:"icon-comment",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.62739 1.25C2.9347 1.25 1.5625 2.6222 1.5625 4.31489L1.56396 12.643C1.56403 14.3356 2.9362 15.7078 4.62885 15.7078H6.48326L6.93691 17.6869L6.93884 17.6948C7.16894 18.6441 8.28598 19.0599 9.08073 18.4921L12.7965 15.7078H15.5001C17.1928 15.7078 18.565 14.3355 18.565 12.6428L18.5635 4.31477C18.5635 2.62213 17.1913 1.25 15.4986 1.25H4.62739ZM5.98265 9.89255C6.68783 9.89255 7.2595 9.32089 7.2595 8.61571C7.2595 7.91053 6.68783 7.33887 5.98265 7.33887C5.27747 7.33887 4.70581 7.91053 4.70581 8.61571C4.70581 9.32089 5.27747 9.89255 5.98265 9.89255ZM9.95604 9.89255C10.6612 9.89255 11.2329 9.32089 11.2329 8.61571C11.2329 7.91053 10.6612 7.33887 9.95604 7.33887C9.25086 7.33887 8.6792 7.91053 8.6792 8.61571C8.6792 9.32089 9.25086 9.89255 9.95604 9.89255ZM15.2124 8.61571C15.2124 9.32089 14.6407 9.89255 13.9355 9.89255C13.2304 9.89255 12.6587 9.32089 12.6587 8.61571C12.6587 7.91053 13.2304 7.33887 13.9355 7.33887C14.6407 7.33887 15.2124 7.91053 15.2124 8.61571Z"})],-1)),ga=Re(()=>e("symbol",{id:"icon-zan",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.0651 3.25923C12.6654 2.21523 12.1276 1.60359 11.4633 1.40559C10.8071 1.21 10.2539 1.48626 9.97848 1.67918C9.43962 2.05668 9.17297 2.64897 9.0009 3.12662C8.93522 3.30893 8.87504 3.50032 8.82077 3.67291L8.82077 3.67292C8.80276 3.73019 8.78541 3.78539 8.76872 3.8375C8.6974 4.06017 8.63455 4.23905 8.56561 4.38315C8.07104 5.41687 7.64014 6.034 7.2617 6.43277C6.89154 6.8228 6.5498 7.0275 6.18413 7.21038C5.8887 7.35813 5.69369 7.66144 5.69365 8.00211L5.69237 17.3908C5.6923 17.8783 6.08754 18.2736 6.57511 18.2736H14.8382C15.2621 18.2736 15.5829 18.1393 15.8149 17.9421C15.9234 17.8497 15.9985 17.7554 16.0484 17.6856C16.0695 17.6561 16.088 17.6282 16.0983 17.6126L16.1017 17.6075L16.1033 17.6051L16.1194 17.5857L16.1428 17.5478C16.913 16.3019 17.4472 15.3088 17.8659 14.1183C18.3431 12.7613 18.5849 11.5853 18.6874 10.6685C18.7871 9.77617 18.7612 9.07318 18.6558 8.68779C18.5062 8.14118 18.138 7.82653 17.7668 7.66617C17.4231 7.51771 17.0763 7.49836 16.8785 7.49807L13.1134 7.44551C13.662 5.19751 13.31 3.89889 13.0651 3.25923ZM1.251 8.0848C1.22726 7.5815 1.62891 7.16046 2.13277 7.16046H3.4408C3.92832 7.16046 4.32354 7.55568 4.32354 8.04321V17.4303C4.32354 17.9178 3.92832 18.313 3.4408 18.313H2.57554C2.10419 18.313 1.71599 17.9427 1.69378 17.4718L1.251 8.0848Z"})],-1)),Ca=[pa,ga],Ia={class:"common-write-content"},ba={class:"flex justify-end m-2"},ya=G({__name:"CursorCommentList",props:{article:{},commentParents:{},topCommentInfo:{}},setup(a){const n=te().global,d=j("loginDialogClicked"),E=ve().params.articleId,s=L([]),r=L(!1);function V(){r.value=!0}z("emitOk",V);const g=L(!0),_=L(),T=L(),y=L(""),b=a;w();async function w(){if(await S(),b.topCommentInfo){const t=b.topCommentInfo?s.value.findIndex(u=>u.commentId===b.topCommentInfo.commentId):-1;t>=0&&s.value.splice(t,1),s.value.unshift(b.topCommentInfo)}}async function D(){await S()}async function S(){const t={articleId:E,parentId:0,limit:5};if(s.value.length){const C=s.value[s.value.length-1];t.cursor=re(C.commentTime).format("YYYY-MM-DDTHH:mm:ss"),t.cursorId=Number(C.commentId)}const m=(await B($e,t)).data.result;let c=[...m.comments];if(b.topCommentInfo&&(c=c.filter(C=>{var k;return C.commentId!==((k=b.topCommentInfo)==null?void 0:k.commentId)})),s.value.push(...c),g.value=m.hasMore,c.length){const C=c[c.length-1];_.value=C.commentTime,T.value=Number(C.commentId)}}const f=()=>{if(!n.isLogin){d?d():console.error("showLoginDialog is not defined");return}fe(we,{articleId:b.article.articleId,authorId:b.article.author,commentContent:y.value}).then(t=>{J("ËØÑËÆ∫ÊàêÂäü","success"),y.value="",s.value.unshift(t.data.result);const u=s.value[s.value.length-1];_.value=u.commentTime,T.value=Number(u.commentId)}).catch(()=>{J("ËØÑËÆ∫Â§±Ë¥•","error")})};return(t,u)=>{const m=P("el-input"),c=P("ChatSquare"),C=P("el-icon"),k=P("el-button");return I(),A("div",va,[e("div",null,[(I(),A("svg",_a,Ca))]),e("div",Ia,[l(m,{onClick:u[0]||(u[0]=()=>{v(n).isLogin||v(d)&&v(d)()}),modelValue:y.value,"onUpdate:modelValue":u[1]||(u[1]=M=>y.value=M),rows:2,resize:"none",type:"textarea",maxlength:"512",placeholder:v(n).isLogin?"ËÆ®ËÆ∫Â∫î‰ª•Â≠¶‰π†ÂíåÁ≤æËøõ‰∏∫ÁõÆÁöÑ„ÄÇËØ∑ÂãøÂèëÂ∏É‰∏çÂèãÂñÑÊàñËÄÖË¥üËÉΩÈáèÁöÑÂÜÖÂÆπÔºå‰∏é‰∫∫‰∏∫ÂñÑÔºåÊØîËÅ™ÊòéÊõ¥ÈáçË¶ÅÔºÅ":"ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçËØÑËÆ∫"},null,8,["modelValue","placeholder"]),e("p",ba,[l(k,{onClick:f,disabled:y.value.length===0},{default:p(()=>[F(" ËØÑËÆ∫"),l(C,{class:"el-icon--right"},{default:p(()=>[l(c)]),_:1})]),_:1},8,["disabled"])])]),e("div",null,"ÂÖ± "+$(t.article.count.commentCnt)+" Êù°ËØÑËÆ∫",1),(I(!0),A(Q,null,ce(s.value,M=>(I(),q(fa,{key:M.commentId,item:M,"target-index":t.commentParents?1:void 0,"comment-parents":t.commentParents&&t.commentParents[0]===M.commentId?t.commentParents:void 0,"if-ok":t.commentParents?r.value:!0,authorId:+b.article.author,onDeleteComment:ae=>s.value=s.value.filter(le=>le.commentId!==ae.commentId)},null,8,["item","target-index","comment-parents","if-ok","authorId","onDeleteComment"]))),128)),g.value?(I(),A("div",{key:0,class:"expand",onClick:D},"Â±ïÂºÄÊõ¥Â§ö")):U("",!0)])}}}),ka=oe(ya,[["__scopeId","data-v-8b9a1d64"]]),De=a=>(de("data-v-4dce5d86"),a=a(),ue(),a),La={key:0,class:"home article-detail"},Aa={class:"col-body pg-2-article",id:"article-detail-body-div"},Ea={class:"com-3-layout"},wa={class:"layout-main"},Na=De(()=>e("div",{class:"correlation-article bg-color-white",id:"relatedRecommend"},[e("h4",{class:"correlation-article-title"},"Áõ∏ÂÖ≥Êé®Ëçê(Êï¨ËØ∑ÊúüÂæÖ)"),e("div",{class:"bg-color-white"},[e("div",{id:"articleList"})])],-1)),$a={class:"layout-side hidden-when-screen-small flex-col flex"},Ma={class:"sticky top-5 overflow-auto",id:"content-menu"},Ta=De(()=>e("em",null,"ÊñáÁ´†ÁõÆÂΩï",-1)),Ra=G({__name:"ArticleDetailView",setup(a){const H=ve();let n=st({...ft});const d=te(),h=d.global,E=H.params.articleId,s=document.documentElement,r=L(!1);z("loginDialogClicked",()=>{r.value=!r.value}),z("updateArticleComment",f=>{Object.assign(n.comments,f.comments)});const _=L(!1),T=he(),y=L("");Ne(async()=>{const f=window.location.hash;f&&f.startsWith("#comment-")&&(y.value=f.substring(9));const t={commentId:y.value||"-1"};B(nt+`/${E}`,t).then(u=>{if(u.data.redirect)T.replace("/column/"+u.data.result.columnId+"/"+u.data.result.sectionId);else{if(d.setGlobal(u.data.global),!u.data.result||!u.data.result.article){T.replace("/empty-article");return}Object.assign(n,u.data.result),it(n.article.title),_.value=!0,n.article.count=n.article.count||{},n.article.count.likeCnt=n.article.count.likeCnt||0,n.article.count.commentCnt=n.article.count.commentCnt||0,n.article.count.collectCnt=n.article.count.collectCnt||0,n.article.count.readCnt=n.article.count.readCnt||0,setTimeout(()=>{b()},300)}})});function b(){const f=window.location.hash;if(f&&f.startsWith("#comment-")){const t=f.substring(9);let u=0;const m=10,c=200,C=()=>{u++;const k=document.getElementById(`comment-${t}`);k?(k.scrollIntoView({behavior:"smooth",block:"center"}),k.classList.add("bg-yellow-50"),setTimeout(()=>{k.classList.remove("bg-yellow-50")},3e3)):u<m&&setTimeout(C,c)};C()}}ie(()=>H.path,()=>{setTimeout(()=>{b()},300)}),ie(()=>n.commentParents,async()=>{await ut(),b()});const w=(f,t)=>{switch(n.article.count||(n.article.count={likeCnt:0,readCnt:0,collectCnt:0,commentCnt:0}),f){case"like":n.article.count.likeCnt=t;break;case"comment":n.article.count.commentCnt=t;break;case"collect":n.article.count.collectCnt=t;break;case"read":n.article.count.readCnt=t;break}},D=(f,t)=>{n.article[f]=t},S=(f,t)=>{n.article[f]=t};return(f,t)=>{const u=P("el-divider"),m=P("el-scrollbar");return I(),A(Q,null,[l(rt),_.value?(I(),A("div",La,[e("div",Aa,[e("div",Ea,[e("div",wa,[l(vo,{global:v(h),articleVo:v(n),categoryId:v(n).article.categoryId,onUpdateCount:w,onUpdateStatus:D,onUpdateArticleInfo:S},null,8,["global","articleVo","categoryId"]),l(ka,{article:v(n).article,"comment-parents":v(n).commentParents,"top-comment-info":v(n).topCommentInfo||void 0},null,8,["article","comment-parents","top-comment-info"]),Na]),e("div",$a,[l(jo,{global:v(h),user:v(n).author},null,8,["global","user"]),e("div",Ma,[l(m,null,{default:p(()=>[Ta,l(u),l(v(ht),{"editor-id":"id","scroll-element":v(s)},null,8,["scroll-element"])]),_:1})])])])]),l(dt)])):U("",!0),l(ct,{clicked:r.value},null,8,["clicked"])],64)}}}),Pa=oe(Ra,[["__scopeId","data-v-4dce5d86"]]);export{Pa as default};
