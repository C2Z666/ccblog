import{d as U,u as j,a3 as O,r as c,w as W,a1 as H,c as r,b as s,a as e,O as M,t as v,h as o,g as C,y as p,e as I,a6 as Y,aC as J,F as L,$ as K,aD as Q,l as X,aE as Z,a0 as P,n as b,o as d,a7 as ee,i as te,aF as ae,a8 as se,D as oe,E as ce,_ as le}from"./index-AE1sWZDZ.js";const n=m=>(oe("data-v-5e291a43"),m=m(),ce(),m),ne=n(()=>e("div",{class:"decorative-shapes"},[e("div",{class:"shape shape-1"}),e("div",{class:"shape shape-2"}),e("div",{class:"shape shape-3"})],-1)),ie={class:"tag-header-content compact"},re={class:"compact-content"},de=n(()=>e("div",{class:"compact-icon-container"},[e("i",{class:"el-icon-tags compact-icon"})],-1)),ue={class:"tag-title compact-title"},ge={key:0,class:"article-count compact-count"},_e={class:"count-number"},he=n(()=>e("span",{class:"count-label"},"篇文章",-1)),ve={class:"tag-header-content full"},pe=n(()=>e("div",{class:"tag-icon-container"},[e("i",{class:"el-icon-tags"})],-1)),me={class:"tag-title"},fe={class:"tag-description"},ke={key:0,class:"article-count"},ye={class:"content-container"},Ce={class:"main-content"},be={class:"article-area"},xe=n(()=>e("div",{class:"section-header mb-4"},[e("h2",{class:"section-title"},[e("i",{class:"el-icon-document"}),p(" 相关文章 ")]),e("div",{class:"section-divider"})],-1)),Se=n(()=>e("div",{class:"skeleton-divider"},null,-1)),De={class:"main-content"},Ie={class:"article-area"},Te=n(()=>e("div",{class:"section-header mb-6"},[e("h2",{class:"section-title"},[e("i",{class:"el-icon-document-checked"}),p(" 相关文章 ")]),e("div",{class:"section-divider"})],-1)),ze={key:0,id:"articleList",class:"article-list-wrapper"},we={class:"articles-grid"},Le={key:1,class:"empty-state"},Pe={class:"empty-content"},Ee=n(()=>e("div",{class:"empty-icon"},[e("i",{class:"el-icon-document-remove"})],-1)),Ne=n(()=>e("h3",null,"暂无相关文章",-1)),Re=n(()=>e("p",{class:"empty-desc"},"我们还没有找到与该标签相关的内容",-1)),Ae={key:2,class:"pagination-container"},Be=100,Fe=U({__name:"ArticleWithTag",setup(m){const E=j(),x=K();let a=O({...Q});const u=c(1),T=c(0),f=c(10),g=c(!0),_=c(""),z=c(1),k=c(!1),N=c(0),w=c(0),y=()=>{X(Z,{tagId:z.value,currentPage:u.value,pageSize:f.value}).then(t=>{t.data&&t.data.result&&(t.data.global&&E.setGlobal(t.data.global),Object.assign(a,t.data.result),T.value=Number(t.data.result.pages||0),u.value=Number(t.data.result.current||1)),g.value=!1}).catch(t=>{console.error("Failed to fetch tag articles:",t),g.value=!1})};W(()=>x.query.tag,t=>{t&&(_.value=t,u.value=1,g.value=!0,y())},{immediate:!0});const R=t=>{f.value=t,y()},A=t=>{u.value=t,y()};H(()=>{const t=x.query.tagId,l=x.query.tag;t&&(z.value=Number(t)),l&&(_.value=String(l)),y();const i=document.querySelector(".tag-header-section");i&&i.addEventListener("touchend",F)});const B=t=>{t.target.scrollTop>50&&k.value&&(k.value=!1)},F=()=>{w.value>=Be&&(k.value=!0),N.value=0,w.value=0};P("loginDialogClicked",()=>{S.value=!S.value});const S=c(!1);P("registerDialogClicked",()=>{D.value=!D.value});const D=c(!1);return(t,l)=>{const i=b("el-skeleton-item"),q=b("el-button"),G=b("el-pagination"),V=b("el-skeleton");return d(),r(L,null,[s(ee),e("div",{class:"tag-article-container",onScroll:B},[e("div",{class:M(["tag-header-section collapsed",{expanded:k.value}])},[ne,e("div",ie,[e("div",re,[de,e("h1",ue,v(_.value),1),o(a).records&&o(a).records.length>0?(d(),r("div",ge,[e("span",_e,v(o(a).total||0),1),he])):C("",!0)])]),e("div",ve,[pe,e("h1",me,v(_.value),1),e("p",fe,[p("发现与 "),e("strong",null,v(_.value),1),p(" 相关的全部优质内容")]),o(a).records&&o(a).records.length>0?(d(),r("div",ke,[e("span",null,v(o(a).total||0)+" 篇文章",1)])):C("",!0)])],2),e("div",ye,[s(V,{loading:g.value,animated:"",throttle:200,class:"skeleton-container"},{template:I(()=>[e("div",Ce,[e("div",be,[xe,(d(),r(L,null,te(6,(h,$)=>e("div",{key:$,class:"article-skeleton"},[s(i,{variant:"text",style:{width:"80%",height:"24px","margin-bottom":"10px"}}),s(i,{variant:"text",style:{width:"100%",height:"60px","margin-bottom":"10px"}}),s(i,{variant:"text",style:{width:"60%",height:"18px"}}),Se])),64)),s(i,{variant:"text",style:{width:"40%",height:"40px",margin:"20px auto"}})])])]),default:I(()=>[e("div",De,[e("div",Ie,[Te,o(a).records&&o(a).records.length>0?(d(),r("div",ze,[e("div",we,[s(ae,{articles:o(a).records,enhanced:""},null,8,["articles"])])])):g.value?C("",!0):(d(),r("div",Le,[e("div",Pe,[Ee,Ne,Re,s(q,{type:"primary",link:"",onClick:l[0]||(l[0]=h=>t.$router.push("/"))},{default:I(()=>[p("返回首页")]),_:1})])])),o(a).records&&o(a).records.length>0?(d(),r("div",Ae,[s(G,{"page-sizes":[10,20],"hide-on-single-page":"","current-page":u.value,"onUpdate:currentPage":[l[1]||(l[1]=h=>u.value=h),A],"page-size":f.value,"onUpdate:pageSize":[l[2]||(l[2]=h=>f.value=h),R],layout:"sizes, prev, pager, next, jumper, total","page-count":T.value,total:o(a).total||0,"default-current-page":1,class:"pagination"},null,8,["current-page","page-size","page-count","total"])])):C("",!0)])])]),_:1},8,["loading"])]),s(se,{class:"custom-footer"})],32),s(Y,{clicked:S.value},null,8,["clicked"]),s(J,{clicked:D.value},null,8,["clicked"])],64)}}}),$e=le(Fe,[["__scopeId","data-v-5e291a43"]]);export{$e as default};
