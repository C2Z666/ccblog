import{d as fe,r as l,u as xe,w as me,aG as pe,c as n,a as e,g,t as L,F,i as he,b as U,h as ue,H as ge,b0 as W,p as ye,b1 as Ie,b2 as Se,b3 as Ae,b4 as De,W as A,o as i,O as ne,D as we,E as be,l as ke,b5 as Ee,b6 as Ce,b7 as Ne,_ as Te,a1 as Le,e as qe,aV as Re,aH as Me,a9 as re,a0 as He,n as Ue,a7 as Oe,a8 as Ve,b8 as Pe,b9 as ze,ba as Be,bb as We}from"./index-BDNZz3x8.js";import{M as ve}from"./index-DIhYX0vj.js";/* empty css              */const J=T=>(we("data-v-36decacb"),T=T(),be(),T),Ke={class:"chat-ai-view-container"},Ye=J(()=>e("div",{class:"chat-header"},[e("h3",null,"AI èŠå¤©")],-1)),Ge={key:0,class:"loading"},Fe={key:1,class:"error"},Je={key:2,class:"empty-chat"},Xe=J(()=>e("p",null,"å¼€å§‹ä¸AIå¯¹è¯å§ï¼",-1)),Qe=[Xe],je={key:3,class:"load-more-container"},Ze=["disabled"],es=["onContextmenu"],ss={class:"message-wrapper"},ts={class:"message-bubble"},as={class:"message-text"},os={class:"message-time"},ns=J(()=>e("div",{class:"message-avatar"}," ç”¨æˆ· ",-1)),is=J(()=>e("div",{class:"message-avatar"}," AI ",-1)),ls={class:"message-wrapper"},cs={class:"message-bubble"},ds={class:"message-text"},us={class:"message-time"},rs={key:4,class:"message-item ai-message"},vs=J(()=>e("div",{class:"message-avatar"},[e("div",{class:"avatar-circle ai-avatar"},"ğŸ¤–")],-1)),hs={class:"message-content ai-content"},_s={key:0,class:"message-text"},ms=J(()=>e("div",{class:"typing-indicator"},[e("span",{class:"dot"}),e("span",{class:"dot"}),e("span",{class:"dot"})],-1)),fs={class:"chat-input-area"},ps={class:"input-container"},gs=["onKeydown","disabled"],ys={class:"input-actions"},Is=["disabled"],Ss=5,ws=fe({__name:"ChatAiView",props:{sessionId:{},aiModel:{default:"ai1"}},emits:["update-session-preview","update-session-id"],setup(T,{expose:v,emit:k}){const C=l(!1),K=l({x:0,y:0}),y=l(null),I=T,O=k;xe();const M=l(""),_=l([]),p=l(!1),V=l(I.aiModel),m=l(!1),D=l(!1),S=l(!0),P=l(void 0),q=l(void 0),u=l(""),E=l(null),X=l(null);v({focusInput:()=>{X.value&&X.value.focus()}});const z=l(null),R=l(null),N=()=>{E.value&&setTimeout(()=>{E.value.scrollTop=E.value.scrollHeight},100)},ie=()=>{E.value&&setTimeout(()=>{E.value.scrollTop=0},100)},B=s=>{const t=new Date(s),o=new Date().getTime()-t.getTime(),d=Math.floor(o/(1e3*60*60*24));return d===0?t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):d===1?"æ˜¨å¤© "+t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):d<7?"å‘¨"+["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"][t.getDay()]+" "+t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"})+" "+t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},ee=async(s,t,a)=>{try{const o={sessionId:Number(s),cursor:a,cursorSeq:t,limit:Ss},d=await ke(Ee,o);if(d.data.result){const c=d.data.result,f=c.chatAiItems.map(b=>({seq:b.seq,sender:b.sender,content:b.content,createTime:b.createTime})),$=f.reverse();_.value=[...$,..._.value],S.value=c.hasMore,$.length>0&&S.value&&(P.value=$[0].seq,q.value=$[0].createTime),f.forEach(b=>{b.createTime=B(b.createTime)}),H(),ie()}}catch(o){D.value=!0,console.error("è·å–èŠå¤©å†å²å¤±è´¥:",o),A("è·å–èŠå¤©å†å²å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","")}},se=async s=>{try{m.value=!0,D.value=!1,_.value=[],S.value=!0,P.value=void 0,q.value=void 0,await ee(s,void 0,void 0)}catch(t){D.value=!0,console.error("åŠ è½½ä¼šè¯æ¶ˆæ¯å¤±è´¥:",t)}finally{m.value=!1,N()}};me(()=>I.sessionId,s=>{s&&se(s)},{immediate:!0}),me(()=>I.aiModel,s=>{s&&(V.value=s)});const Q=async()=>{if(!(m.value||!S.value||!I.sessionId))try{m.value=!0,await ee(I.sessionId,P.value,q.value)}finally{m.value=!1}},H=()=>{const s=_.value[_.value.length-1];O("update-session-preview",{sessionId:I.sessionId,preview:s?s.content.substring(0,30)+(s.content.length>30?"...":""):"æš‚æ— æ¶ˆæ¯",createTime:s?s.createTime:B(new Date().toISOString()),model:V.value})};let w=null;const le=()=>{if(w){if(w.cancel(),w=null,u.value){const s=new Date,t={seq:R.value||Date.now(),sender:1,content:u.value,createTime:B(s.toISOString())};_.value.push(t),H(),N()}p.value=!1,u.value=""}},Y=async()=>{const s=M.value.trim();if(!s||p.value||m.value)return;if(m.value){setTimeout(()=>{Y()},100);return}w&&(w.cancel(),w=null),z.value=null,R.value=null;const t=new Date,a={seq:Date.now(),sender:0,content:s,createTime:B(t.toISOString())};_.value.push(a),M.value="",H(),N(),p.value=!0,u.value="";const o={aiType:V.value,content:s,createTime:new Date().toLocaleString("sv-SE",{timeZone:"Asia/Shanghai"}).replace(" ","T")};try{const d=`${Ae}${De}`,c=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify({...o,sessionId:I.sessionId}),credentials:"include"});if(!c.ok||!c.body)throw new Error("è·å–AIå›å¤å¤±è´¥: "+c.statusText);w=c.body.getReader();let f="";const $=async()=>{const{done:b,value:G}=await w.read();if(b)return;if(G){const ae=new TextDecoder;f+=ae.decode(G)}const _e=f.split(`

`);f=_e.pop()||"";for(const ae of _e){if(!ae.trim())continue;const $e=ae.split(`
`);let oe="message",Z="";for(const r of $e)r.startsWith("event:")?oe=r.substring(6).trim():r.startsWith("data:")&&(Z=r.substring(5).trim());if(oe==="seq"&&Z)try{const r=JSON.parse(Z);z.value=r.userSeq,R.value=r.aiSeq,I.sessionId==="0"&&r.sessionId&&O("update-session-id",r.sessionId);const x=_.value[_.value.length-1];x&&x.sender===0&&z.value!==null&&(x.seq=z.value)}catch(r){console.error("è§£æSSE seqæ¶ˆæ¯å¤±è´¥:",r)}if(oe==="add"&&Z)try{const r=JSON.parse(Z);let x="";r.choices&&r.choices[0]&&(r.choices[0].delta&&r.choices[0].delta.content?x=r.choices[0].delta.content:r.choices[0].message&&r.choices[0].message.content&&(x=r.choices[0].message.content)),x&&(u.value+=x,N())}catch(r){console.error("è§£æSSEæ¶ˆæ¯å¤±è´¥:",r)}if(oe==="done"){const r=new Date,x={seq:R.value||0,sender:1,content:u.value,createTime:B(r.toISOString())};_.value.push(x),H(),p.value=!1,u.value="";return}}return $()};if(await $(),u.value&&p.value){const b=new Date,G={seq:R.value||0,sender:1,content:u.value,createTime:b.toISOString()};_.value.push(G),H(),N()}p.value=!1,u.value=""}catch(d){console.error("SSEè¿æ¥é”™è¯¯:",d),A("è·å–AIå›å¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",""),p.value=!1,u.value=""}},te=s=>{s.shiftKey||Y()};async function j(){if(y.value)try{const s=await Ce(Ne,{sessionId:Number(I.sessionId),seq:Number(y.value.seq)});if(s&&s.status===200&&s.data){const t=_.value.findIndex(a=>a.seq===y.value.seq);t>-1&&_.value.splice(t,1),H()}else console.error("åˆ é™¤å¤±è´¥:",s),A("åˆ é™¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","")}catch(s){console.error("åˆ é™¤è¯·æ±‚å¼‚å¸¸:",s),A("åˆ é™¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","")}finally{de()}}function ce(s,t){K.value={x:s.clientX,y:s.clientY},y.value=t,C.value=!0}function de(){C.value=!1,y.value=null}return pe(()=>{w&&(w.cancel(),w=null)}),(s,t)=>(i(),n("div",Ke,[Ye,e("div",{class:"chat-messages",ref_key:"chatMessagesContainer",ref:E},[m.value&&_.value.length===0?(i(),n("div",Ge,"åŠ è½½ä¸­...")):D.value?(i(),n("div",Fe,"åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•")):_.value.length===0?(i(),n("div",Je,Qe)):g("",!0),S.value&&_.value.length>0?(i(),n("div",je,[e("button",{class:"load-more-btn",onClick:Q,disabled:m.value},L(m.value?"åŠ è½½ä¸­...":"å±•å¼€æ›´å¤š"),9,Ze)])):g("",!0),(i(!0),n(F,null,he(_.value,(a,o)=>(i(),n("div",{key:`${a.seq}-${o}`,class:ne(["message-item",a.sender===0?"user-message":"ai-message"]),onContextmenu:W(d=>ce(d,a),["prevent"])},[a.sender===0?(i(),n(F,{key:0},[e("div",ss,[e("div",ts,[e("div",as,[U(ue(ve),{"model-value":a.content,toolbars:!1,"copy-code":!1,"preview-class":"chat-md-preview"},null,8,["model-value"])])]),e("div",os,L(a.createTime),1)]),ns],64)):(i(),n(F,{key:1},[is,e("div",ls,[e("div",cs,[e("div",ds,[U(ue(ve),{"model-value":a.content,toolbars:!1,"copy-code":!1,"preview-class":"chat-md-preview"},null,8,["model-value"])])]),e("div",us,L(a.createTime),1)])],64))],42,es))),128)),p.value?(i(),n("div",rs,[vs,e("div",hs,[u.value?(i(),n("div",_s,[U(ue(ve),{"model-value":u.value,toolbars:!1,"copy-code":!1,"preview-class":"chat-md-preview ai-preview"},null,8,["model-value"])])):g("",!0),ms])])):g("",!0)],512),C.value?(i(),n("div",{key:0,class:"context-menu",style:ge({left:K.value.x+"px",top:K.value.y+"px"}),onClick:t[0]||(t[0]=W(()=>{},["stop"]))},[e("div",{class:"menu-item",onClick:j},"åˆ é™¤")],4)):g("",!0),C.value?(i(),n("div",{key:1,class:"context-menu-backdrop",onClick:de})):g("",!0),e("div",fs,[e("div",ps,[ye(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>M.value=a),ref_key:"chatInput",ref:X,onKeydown:Se(W(te,["prevent"]),["enter"]),placeholder:"è¾“å…¥æ‚¨çš„é—®é¢˜...",disabled:p.value},null,40,gs),[[Ie,M.value]]),e("div",ys,[p.value?(i(),n("button",{key:0,class:"stop-btn",onClick:le}," åœæ­¢ ")):(i(),n("button",{key:1,class:"send-btn",onClick:Y,disabled:!M.value.trim()}," å‘é€ ",8,Is))])])])]))}}),bs=Te(ws,[["__scopeId","data-v-36decacb"]]),h=T=>(we("data-v-274edf87"),T=T(),be(),T),ks={class:"chat-main-container"},Cs={key:0,class:"chat-layout"},Ts={class:"chat-list-sidebar"},Ms=h(()=>e("h3",null,"AI ä¼šè¯åˆ—è¡¨",-1)),$s=h(()=>e("span",{class:"icon"},"Ã—",-1)),xs=h(()=>e("span",null,"é€€å‡ºèŠå¤©",-1)),As=[$s,xs],Ds={class:"chat-list-content"},Es={key:0,class:"loading"},Ns=h(()=>e("div",{class:"loading-spinner"},null,-1)),Ls=h(()=>e("span",null,"åŠ è½½ä¸­...",-1)),qs=[Ns,Ls],Rs={key:1,class:"error"},Hs=h(()=>e("span",{class:"error-icon"},"âš ",-1)),Us=h(()=>e("span",null,"åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•",-1)),Os=[Hs,Us],Vs={key:2,class:"empty-message"},Ps=h(()=>e("div",{class:"empty-icon"},"ğŸ’¬",-1)),zs=h(()=>e("p",null,"æš‚æ— AIä¼šè¯",-1)),Bs=["onClick"],Ws={class:"session-info"},Ks={class:"session-name"},Ys={key:0,class:"session-time"},Gs={class:"session-actions"},Fs=["onClick"],Js=h(()=>e("span",{class:"icon-dots"},"â€¢â€¢â€¢",-1)),Xs=[Js],Qs={key:3,class:"load-more-container"},js=["disabled"],Zs={class:"chat-detail"},et={class:"ai-info-sidebar"},st=h(()=>e("div",{class:"ai-info-header"},[e("h4",null,"AIæ¨¡å‹ä¿¡æ¯")],-1)),tt={class:"ai-info-content"},at=Me('<div class="model-icon" data-v-274edf87>ğŸ§ </div><div class="model-name" data-v-274edf87>QWEN 1.7B</div><div class="model-desc" data-v-274edf87>è½»é‡çº§ä¸­æ–‡å¤§è¯­è¨€æ¨¡å‹ï¼Œå“åº”è¿…é€Ÿ</div><div class="model-stats" data-v-274edf87><span class="stat-item" data-v-274edf87>å‚æ•°ï¼š1.7B</span><span class="stat-item" data-v-274edf87>æ“…é•¿ï¼šæ—¥å¸¸å¯¹è¯</span></div>',4),ot={key:0,class:"select-indicator"},nt=Me('<div class="model-icon" data-v-274edf87>ğŸ¤–</div><div class="model-name" data-v-274edf87>DEEPSEEK r1</div><div class="model-desc" data-v-274edf87>ä»£ç ä¸æ¨ç†èƒ½åŠ›å‡ºè‰²çš„æ¨¡å‹</div><div class="model-stats" data-v-274edf87><span class="stat-item" data-v-274edf87>å‚æ•°ï¼š7B</span><span class="stat-item" data-v-274edf87>æ“…é•¿ï¼šç¼–ç¨‹è¾…åŠ©</span></div>',4),it={key:0,class:"select-indicator"},lt=h(()=>e("div",{class:"model-tips"},[e("h5",null,"ğŸ’¡ ä½¿ç”¨æç¤º"),e("ul",null,[e("li",null,"æ¸…æ™°æè¿°æ‚¨çš„é—®é¢˜"),e("li",null,"æä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯"),e("li",null,"å¯¹å¤æ‚é—®é¢˜åˆ†æ­¥æé—®"),e("li",null,"ä½¿ç”¨ç®€æ´å‡†ç¡®çš„è¯­è¨€")])],-1)),ct={key:1,class:"full-width-ai-list"},dt=h(()=>e("h3",null,"AI ä¼šè¯åˆ—è¡¨",-1)),ut=h(()=>e("span",{class:"icon"},"+",-1)),rt=h(()=>e("span",null,"æ–°ä¼šè¯",-1)),vt=[ut,rt],ht={class:"ai-list-content"},_t={key:0,class:"loading"},mt={key:1,class:"error"},ft={key:2,class:"empty-message"},pt=["onClick"],gt={class:"session-info"},yt={class:"session-name"},It={key:0,class:"session-time"},St={class:"session-actions"},wt=["onClick"],bt=h(()=>e("span",{class:"icon-dots"},"â€¢â€¢â€¢",-1)),kt=[bt],Ct={key:3,class:"load-more-container"},Tt=["disabled"],Mt=h(()=>e("span",{class:"menu-icon"},"âœï¸",-1)),$t=h(()=>e("span",null,"ç¼–è¾‘æ ‡é¢˜",-1)),xt=[Mt,$t],At=h(()=>e("div",{class:"menu-divider"},null,-1)),Dt=h(()=>e("span",{class:"menu-icon"},"ğŸ—‘ï¸",-1)),Et=h(()=>e("span",null,"åˆ é™¤",-1)),Nt=[Dt,Et],Lt=h(()=>e("h3",null,"ç¼–è¾‘æ ‡é¢˜",-1)),qt={class:"dialog-content"},Rt={class:"dialog-buttons"},Ht=["disabled"],Ut=fe({__name:"ChatAiSession",setup(T){const v=l([]),k=l(null),C=l("ai1"),K=s=>{C.value=s,console.log("å·²é€‰æ‹©AIæ¨¡å‹:",s),k.value&&A(`å·²åˆ‡æ¢åˆ°${s==="ai1"?"QWEN 1.7Bæ¨¡å‹":"DEEPSEEK r1æ¨¡å‹(æ•¬è¯·æœŸå¾…)"}`,"")},y=l(!1),I=l(!1),O=l(!1),M=l(!0),_=l(void 0),p=l(!1),V=l({x:0,y:0}),m=l(null),D=l(!1),S=l(""),P=l(null),q=l(null),u=l(null),E=async(s,t=!1)=>{try{if(t&&!M.value)return;t?y.value=!0:(y.value=!0,I.value=!1,v.value=[],_.value=void 0);const o=await ke(Pe,{cursorId:s,limit:10});if(o.data.result){const d=o.data.result,c=d.chatAiSessionItems.map(f=>({sessionId:f.sessionId,title:f.title,lastMsgTime:f.lastMsgTime}));t?v.value=[...v.value,...c]:v.value=c,M.value=d.hasMore,c.length>0&&(_.value=c[c.length-1].sessionId)}re(()=>{document.querySelectorAll(".ai-session-item").forEach((c,f)=>{setTimeout(()=>{c.style.opacity="1",c.style.transform="translateY(0)"},f*50)})})}catch(a){I.value=!0,console.error("è·å–AIä¼šè¯åˆ—è¡¨å¤±è´¥:",a),A("è·å–AIä¼šè¯åˆ—è¡¨å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","")}finally{y.value=!1}},X=()=>{E()},z=()=>{E(_.value,!0)},R=()=>{const s=new Date,t={sessionId:0,title:`æ–°å¯¹è¯ ${s.toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}`,lastMsgTime:s.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};v.value.unshift(t),re(()=>{const a=document.querySelector(".ai-session-item");a&&(a.style.opacity="0",a.style.transform="translateY(-20px)",setTimeout(()=>{a.style.opacity="1",a.style.transform="translateY(0)"},10))}),N(0)},N=s=>{k.value=String(s),setTimeout(()=>{P.value&&P.value.focusInput()},100)},ie=()=>{k.value=null},B=s=>{const t=v.value.findIndex(a=>String(a.sessionId)===s.sessionId);if(t!==-1&&t>0){const a=v.value.splice(t,1)[0];v.value.unshift(a)}},ee=s=>{const t=v.value.findIndex(a=>String(a.sessionId)===k.value);t!==-1&&(v.value[t].sessionId=Number(s)),k.value=s},se=(s,t)=>{s.preventDefault(),u.value&&(clearTimeout(u.value),u.value=null);const a=180,o=120,d=window.innerWidth,c=window.innerHeight,f=s.clientX,$=s.clientY,b=f+a>d?f-a:f,G=$+o>c?Math.max(0,c-o):$;V.value={x:b,y:G},m.value=t,p.value=!0},Q=()=>{p.value=!1,m.value=null},H=()=>{m.value&&(S.value=m.value.title,D.value=!0,p.value=!1,re(()=>{setTimeout(()=>{q.value&&(q.value.focus(),q.value.select())},100)}))},w=()=>{u.value&&(clearTimeout(u.value),u.value=null)},le=()=>{u.value||(u.value=window.setTimeout(()=>{Q()},300))},Y=s=>{try{const t=new Date(s),o=new Date().getTime()-t.getTime(),d=Math.floor(o/6e4),c=Math.floor(o/36e5),f=Math.floor(o/864e5);return d<1?"åˆšåˆš":d<60?`${d}åˆ†é’Ÿå‰`:c<24?`${c}å°æ—¶å‰`:f<7?`${f}å¤©å‰`:`${t.getMonth()+1}æœˆ${t.getDate()}æ—¥`}catch{return s}},te=async()=>{if(!m.value||!S.value.trim())return;const s=m.value.sessionId,t=S.value.trim(),a=v.value.findIndex(o=>o.sessionId===s);a!==-1&&(v.value[a].title=t);try{await ze(`${Be}?sessionId=${Number(s)}&title=${encodeURIComponent(t)}`),A("é‡å‘½åæˆåŠŸ","success")}catch(o){console.error("é‡å‘½åä¼šè¯å¤±è´¥:",o),A("é‡å‘½åå¤±è´¥ï¼Œè¯·é‡è¯•","error")}finally{D.value=!1,S.value=""}},j=()=>{D.value=!1,S.value=""},ce=async()=>{if(!m.value)return;const s=m.value.sessionId;p.value=!1;const t=v.value.findIndex(a=>a.sessionId===s);t!==-1&&v.value.splice(t,1),k.value===String(s)&&(k.value=null);try{await Ce(`${We}?sessionId=${Number(s)}`),A("åˆ é™¤æˆåŠŸ","success")}catch(a){console.error("åˆ é™¤ä¼šè¯å¤±è´¥:",a),A("åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•","error")}finally{m.value=null}};return document.addEventListener("click",s=>{(!s.target||!s.target.closest(".action-btn")&&!s.target.closest(".context-menu"))&&(u.value||(u.value=window.setTimeout(()=>{Q()},100)))}),He("loginDialogClicked",()=>{O.value=!O.value,console.log("clicked: ",O.value)}),Le(()=>{X()}),pe(()=>{document.removeEventListener("click",s=>{(!s.target||!s.target.closest(".action-btn"))&&Q()})}),(s,t)=>{const a=Ue("LoginDialog");return i(),n(F,null,[U(Oe),e("div",ks,[k.value?(i(),n("div",Cs,[e("div",Ts,[e("div",{class:"chat-list-header"},[Ms,e("button",{class:"close-chat-btn",onClick:ie,title:"é€€å‡ºèŠå¤©"},As)]),e("div",Ds,[y.value?(i(),n("div",Es,qs)):I.value?(i(),n("div",Rs,Os)):v.value.length===0?(i(),n("div",Vs,[Ps,zs,e("button",{class:"create-first-chat-btn",onClick:R},"åˆ›å»ºç¬¬ä¸€ä¸ªä¼šè¯")])):g("",!0),(i(!0),n(F,null,he(v.value,(o,d)=>(i(),n("div",{key:o.sessionId||d,class:ne(["ai-session-item",{selected:k.value===String(o.sessionId)}]),onClick:c=>N(o.sessionId)},[e("div",Ws,[e("div",Ks,L(o.title),1),o.lastMsgTime?(i(),n("div",Ys,L(Y(o.lastMsgTime)),1)):g("",!0)]),e("div",Gs,[e("button",{class:"action-btn",onClick:W(c=>se(c,o),["stop"]),title:"æ“ä½œ"},Xs,8,Fs)])],10,Bs))),128)),M.value&&v.value.length>0?(i(),n("div",Qs,[e("button",{class:"load-more-btn",disabled:y.value,onClick:z},L(y.value?"åŠ è½½ä¸­...":"å±•å¼€æ›´å¤š"),9,js)])):g("",!0)])]),e("div",Zs,[U(bs,{ref_key:"chatAiViewRef",ref:P,"session-id":k.value||"","ai-model":C.value,onUpdateSessionPreview:B,onUpdateSessionId:ee},null,8,["session-id","ai-model"])]),e("div",et,[st,e("div",tt,[e("div",{class:ne(["model-card",{active:C.value==="ai1"}]),onClick:t[0]||(t[0]=o=>K("ai1"))},[at,C.value==="ai1"?(i(),n("div",ot,"âœ“")):g("",!0)],2),e("div",{class:ne(["model-card",{active:C.value==="ai2"}]),onClick:t[1]||(t[1]=o=>K("ai2"))},[nt,C.value==="ai2"?(i(),n("div",it,"âœ“")):g("",!0)],2),lt])])])):(i(),n("div",ct,[e("div",{class:"ai-list-header"},[dt,e("button",{class:"new-chat-btn",onClick:R,title:"åˆ›å»ºæ–°ä¼šè¯"},vt)]),e("div",ht,[y.value?(i(),n("div",_t,"åŠ è½½ä¸­...")):I.value?(i(),n("div",mt,"åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•")):v.value.length===0?(i(),n("div",ft,"æš‚æ— AIä¼šè¯")):g("",!0),(i(!0),n(F,null,he(v.value,(o,d)=>(i(),n("div",{key:o.sessionId||d,class:"ai-session-item",onClick:c=>N(o.sessionId)},[e("div",gt,[e("div",yt,L(o.title),1),o.lastMsgTime?(i(),n("div",It,L(Y(o.lastMsgTime)),1)):g("",!0)]),e("div",St,[e("button",{class:"action-btn",onClick:W(c=>se(c,o),["stop"]),title:"æ“ä½œ"},kt,8,wt)])],8,pt))),128)),M.value&&v.value.length>0?(i(),n("div",Ct,[e("button",{class:"load-more-btn",disabled:y.value,onClick:z},L(y.value?"åŠ è½½ä¸­...":"å±•å¼€æ›´å¤š"),9,Tt)])):g("",!0)])]))]),U(Ve),U(a,{clicked:O.value},null,8,["clicked"]),p.value?(i(),n("div",{key:0,class:"context-menu",style:ge({left:V.value.x+"px",top:V.value.y+"px"}),onClick:t[2]||(t[2]=W(()=>{},["stop"])),onMouseenter:w,onMouseleave:le},[e("div",{class:"menu-item",onClick:H},xt),At,e("div",{class:"menu-item delete",onClick:ce},Nt)],36)):g("",!0),D.value?(i(),n("div",{key:1,class:"rename-dialog-overlay",onClick:j},[U(Re,{name:"dialog-fade"},{default:qe(()=>[e("div",{class:"rename-dialog",onClick:t[4]||(t[4]=W(()=>{},["stop"]))},[e("div",{class:"dialog-header"},[Lt,e("button",{class:"dialog-close",onClick:j},"Ã—")]),e("div",qt,[ye(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>S.value=o),type:"text",class:"rename-input",placeholder:"è¯·è¾“å…¥æ–°æ ‡é¢˜",onKeyup:Se(te,["enter"]),ref_key:"renameInputRef",ref:q},null,544),[[Ie,S.value]])]),e("div",Rt,[e("button",{class:"cancel-btn",onClick:j},"å–æ¶ˆ"),e("button",{class:"confirm-btn",onClick:te,disabled:!S.value.trim()},"ç¡®è®¤",8,Ht)])])]),_:1})])):g("",!0)],64)}}}),zt=Te(Ut,[["__scopeId","data-v-274edf87"]]);export{zt as default};
